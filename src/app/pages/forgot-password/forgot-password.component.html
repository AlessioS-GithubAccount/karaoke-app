<div class="container mt-5" style="max-width: 500px;">
  <h2 class="text-center mb-4">{{ 'password_recovery.title' | translate }}</h2>

  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ 'password_recovery.error_message' | translate }}
  </div>

  <div *ngIf="successMessage" class="alert alert-success">
    {{ 'password_recovery.success_message' | translate }}
  </div>

  <!-- Step 1: Inserisci username -->
  <div *ngIf="step === 1">
    <label for="username" class="form-label">{{ 'password_recovery.username_label' | translate }}</label>
    <input id="username" [(ngModel)]="username" name="username" class="form-control" required />
    <button class="btn btn-primary mt-3" (click)="cercaDomanda()">
      {{ 'password_recovery.continue_button' | translate }}
    </button>
  </div>

  <!-- Step 2: Mostra domanda e input risposta -->
  <div *ngIf="step === 2">
    <p><strong>{{ 'password_recovery.security_question' | translate }}</strong> {{ domanda }}</p>
    <label for="risposta" class="form-label">{{ 'password_recovery.answer_label' | translate }}</label>
    <input id="risposta" [(ngModel)]="risposta" name="risposta" class="form-control" required />
    <button class="btn btn-primary mt-3" (click)="verificaRisposta()">
      {{ 'password_recovery.verify_answer_button' | translate }}
    </button>
  </div>

  <!-- Step 3: Inserisci nuova password -->
  <div *ngIf="step === 3">
    <label for="nuovaPassword" class="form-label">{{ 'password_recovery.new_password_label' | translate }}</label>
    <input type="password" id="nuovaPassword" [(ngModel)]="nuovaPassword" name="nuovaPassword" class="form-control" required />
    <button class="btn btn-success mt-3" (click)="aggiornaPassword()">
      {{ 'password_recovery.update_password_button' | translate }}
    </button>
  </div>

  <a routerLink="/login" class="btn btn-link mt-4">
    {{ 'password_recovery.back_to_login' | translate }}
  </a>
</div>
