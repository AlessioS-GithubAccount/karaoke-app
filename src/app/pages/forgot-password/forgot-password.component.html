<div class="container mt-5" style="max-width: 500px;">
  <h2 class="text-center mb-4">Recupera la Password con Domanda Segreta</h2>

  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>

  <!-- Step 1: Inserisci username -->
  <div *ngIf="step === 1">
    <label for="username" class="form-label">Inserisci il tuo Username</label>
    <input id="username" [(ngModel)]="username" name="username" class="form-control" required />
    <button class="btn btn-primary mt-3" (click)="cercaDomanda()">Prosegui</button>
  </div>

  <!-- Step 2: Mostra domanda e input risposta -->
  <div *ngIf="step === 2">
    <p><strong>Domanda segreta:</strong> {{ domanda }}</p>
    <label for="risposta" class="form-label">Risposta</label>
    <input id="risposta" [(ngModel)]="risposta" name="risposta" class="form-control" required />
    <button class="btn btn-primary mt-3" (click)="verificaRisposta()">Verifica Risposta</button>
  </div>

  <!-- Step 3: Inserisci nuova password -->
  <div *ngIf="step === 3">
    <label for="nuovaPassword" class="form-label">Inserisci nuova password</label>
    <input type="password" id="nuovaPassword" [(ngModel)]="nuovaPassword" name="nuovaPassword" class="form-control" required />
    <button class="btn btn-success mt-3" (click)="aggiornaPassword()">Aggiorna Password</button>
  </div>

  <a routerLink="/login" class="btn btn-link mt-4">Torna al Login</a>
</div>
