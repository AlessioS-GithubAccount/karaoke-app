<body class="bg-dark text-light">
  <nav class="p-3 text-center bg-dark d-flex justify-content-center gap-2" style="max-width: 600px; margin: auto;">
  </nav>

  <div class="d-flex justify-content-center align-items-center vh-100">
    <div class="container" style="max-width: 600px;">
      <h2 class="mb-4 text-center">Scegli la tua canzone!</h2>

      <form #karaokeForm="ngForm" (ngSubmit)="onSubmit(karaokeForm)" novalidate>

        <div class="form-columns">
          <!-- Colonna Sinistra -->
          <div class="form-col">
            <div class="mb-3">
              <label for="nome" class="form-label">
                Nome <span class="required-asterisk">*</span>
              </label>
              <input
                type="text"
                class="form-control"
                id="nome"
                name="nome"
                [(ngModel)]="formData.nome"
                placeholder="Inserisci il tuo nome"
                required>
            </div>

            <div class="mb-3">
              <label for="artista" class="form-label">
                Artista / Band <span class="required-asterisk">*</span>
              </label>
              <input
                type="text"
                class="form-control"
                id="artista"
                name="artista"
                list="artisti-list"
                [(ngModel)]="formData.artista"
                (input)="filterArtisti()"
                placeholder="Inserisci artista o band"
                required>
              <datalist id="artisti-list">
                <option *ngFor="let artista of artistiFiltrati" [value]="artista"></option>
              </datalist>
            </div>

            <div class="mb-3">
              <label for="canzone" class="form-label">
                Canzone <span class="required-asterisk">*</span>
              </label>
              <input
                type="text"
                class="form-control"
                id="canzone"
                name="canzone"
                list="canzoni-list"
                [(ngModel)]="formData.canzone"
                (input)="filterCanzoni()"
                placeholder="Inserisci la canzone"
                required>
              <datalist id="canzoni-list">
                <option *ngFor="let canzone of canzoniFiltrate" [value]="canzone"></option>
              </datalist>
            </div>

            <div class="mb-3">
              <label for="tonalita" class="form-label">Cambia Tonalit√†</label>
              <input
                type="text"
                class="form-control"
                id="tonalita"
                name="tonalita"
                [(ngModel)]="formData.tonalita"
                placeholder="esempio -2, -1, +1, +2">
            </div>
          </div>

          <!-- Colonna Destra -->
          <div class="form-col">
            <div class="mb-3">
              <label for="num_microfoni" class="form-label">
                Microfoni (1-3) <span class="required-asterisk">*</span>
              </label>
              <input
                type="number"
                class="form-control"
                id="num_microfoni"
                name="num_microfoni"
                [(ngModel)]="formData.num_microfoni"
                #numMicrofoni="ngModel"
                min="1"
                max="3"
                required
                placeholder="Inserisci un numero da 1 a 3"
                (blur)="validateMicrofoni()"
                [class.is-invalid]="numMicrofoni.invalid && (numMicrofoni.dirty || numMicrofoni.touched)">
              <div *ngIf="numMicrofoni.invalid && (numMicrofoni.dirty || numMicrofoni.touched)" class="text-danger mt-1">
                Inserisci un numero valido da 1 a 3.
              </div>
            </div>

            <div class="mb-3 form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="accetta_partecipanti"
                name="accetta_partecipanti"
                [(ngModel)]="formData.accetta_partecipanti">
              <label class="form-check-label" for="accetta_partecipanti">Accetti partecipanti in sala?</label>
            </div>

            <div class="mb-3">
              <label for="note" class="form-label">Note</label>
              <textarea
                class="form-control"
                id="note"
                name="note"
                [(ngModel)]="formData.note"
                rows="3"
                placeholder="Inserisci note aggiuntive"></textarea>
            </div>
          </div>
        </div>

        <div class="text-danger small mb-2 mt-3 text-center">
          <em>* Campi da compilare obbligatori</em>
        </div>

        <div class="text-center">
          <button
            type="submit"
            class="btn btn-primary w-auto px-5"
            [disabled]="!karaokeForm.valid || microfoniInvalid">
            Salva
          </button>
        </div>

      </form>
    </div>
  </div>
</body>
